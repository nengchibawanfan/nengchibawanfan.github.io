<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Redisredisä¸­æ–‡æ•™ç¨‹ Redisçš„ä¼˜åŠ¿  ä¸å…¶ä»–key-valueç¼“å­˜äº§å“ä¼˜åŠ¿ Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚ Redisä¸ä»…ä»…æ”¯æŒkey-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚ Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚ Redisè¿˜æ”¯æŒ publish">
<meta property="og:type" content="article">
<meta property="og:title" content="Redisæ€»ç»“">
<meta property="og:url" content="http://yoursite.com/2019/02/02/Redisæ€»ç»“/index.html">
<meta property="og:site_name" content="èƒ½åƒå…«ç¢—é¥­">
<meta property="og:description" content="Redisredisä¸­æ–‡æ•™ç¨‹ Redisçš„ä¼˜åŠ¿  ä¸å…¶ä»–key-valueç¼“å­˜äº§å“ä¼˜åŠ¿ Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚ Redisä¸ä»…ä»…æ”¯æŒkey-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚ Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚ Redisè¿˜æ”¯æŒ publish">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-07-26T07:57:20.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Redisæ€»ç»“">
<meta name="twitter:description" content="Redisredisä¸­æ–‡æ•™ç¨‹ Redisçš„ä¼˜åŠ¿  ä¸å…¶ä»–key-valueç¼“å­˜äº§å“ä¼˜åŠ¿ Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚ Redisä¸ä»…ä»…æ”¯æŒkey-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚ Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚ Redisè¿˜æ”¯æŒ publish">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/02/02/Redisæ€»ç»“/">





  <title>Redisæ€»ç»“ | èƒ½åƒå…«ç¢—é¥­</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">èƒ½åƒå…«ç¢—é¥­</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/02/Redisæ€»ç»“/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Seven">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="èƒ½åƒå…«ç¢—é¥­">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Redisæ€»ç»“</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-02-02T17:36:33+08:00">
                2019-02-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><p><a href="http://www.redis.net.cn/tutorial/3509.html" target="_blank" rel="noopener">redisä¸­æ–‡æ•™ç¨‹</a></p>
<h3 id="Redisçš„ä¼˜åŠ¿"><a href="#Redisçš„ä¼˜åŠ¿" class="headerlink" title="Redisçš„ä¼˜åŠ¿"></a>Redisçš„ä¼˜åŠ¿</h3><blockquote>
<ul>
<li>ä¸å…¶ä»–key-valueç¼“å­˜äº§å“ä¼˜åŠ¿</li>
<li>Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚</li>
<li>Redisä¸ä»…ä»…æ”¯æŒkey-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚</li>
<li>Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚</li>
<li>Redisè¿˜æ”¯æŒ publish/subscribe, é€šçŸ¥, key è¿‡æœŸç­‰ç­‰ç‰¹æ€§ã€‚<a id="more"></a>
</li>
</ul>
</blockquote>
<h3 id="Redisé…ç½®"><a href="#Redisé…ç½®" class="headerlink" title="Redisé…ç½®"></a>Redisé…ç½®</h3><blockquote>
<p>Redis çš„é…ç½®æ–‡ä»¶ä½äº Redis å®‰è£…ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸º redis.conf</p>
<p><a href="http://www.redis.net.cn/tutorial/3504.html" target="_blank" rel="noopener">å…·ä½“é…ç½®å†…å®¹</a></p>
</blockquote>
<h3 id="Redisåå°è¿è¡Œ"><a href="#Redisåå°è¿è¡Œ" class="headerlink" title="Redisåå°è¿è¡Œ"></a>Redisåå°è¿è¡Œ</h3><p><strong>åå°å¯åŠ¨æœåŠ¡ç«¯</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup redis-server &amp;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨</strong>ï¼šredis-serveré»˜è®¤å¯åŠ¨ç«¯å£æ˜¯6379ï¼Œæ²¡æœ‰å¯†ç </p>
<p>å¦‚æœä¸ä½¿ç”¨é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨æ—¶å¯ä»¥åŠ ä¸Šé…ç½®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup redis-server  ~/soft/redis-2.8.17/redis.conf &amp;</span><br></pre></td></tr></table></figure>
<h3 id="Redis-å­˜å­—ç¬¦ä¸²è¿”å›çš„å´æ˜¯byte"><a href="#Redis-å­˜å­—ç¬¦ä¸²è¿”å›çš„å´æ˜¯byte" class="headerlink" title="Redis å­˜å­—ç¬¦ä¸²è¿”å›çš„å´æ˜¯byte"></a>Redis å­˜å­—ç¬¦ä¸²è¿”å›çš„å´æ˜¯byte</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">r = redis.StrictRedis(host=<span class="string">'127.0.0.1'</span>, port=<span class="number">6379</span>, password=<span class="string">'123456'</span>,</span><br><span class="line">                       db=<span class="number">1</span>, decode_responses=<span class="keyword">True</span>)</span><br><span class="line">ä½¿ç”¨è¿™ç§è¿æ¥å½¢å¼å°±æ˜¯å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å­—ç¬¦ä¸²æ¯”å­—èŠ‚å½¢å¼è¦æ…¢</span><br></pre></td></tr></table></figure>
<h3 id=""><a href="#" class="headerlink" title=" "></a> </h3><h3 id="Redisæ•°æ®ç±»å‹"><a href="#Redisæ•°æ®ç±»å‹" class="headerlink" title="Redisæ•°æ®ç±»å‹"></a>Redisæ•°æ®ç±»å‹</h3><ul>
<li><h4 id="rediså‘½ä»¤ä¹‹å­—ç¬¦ä¸²ï¼ˆStringï¼‰"><a href="#rediså‘½ä»¤ä¹‹å­—ç¬¦ä¸²ï¼ˆStringï¼‰" class="headerlink" title="rediså‘½ä»¤ä¹‹å­—ç¬¦ä¸²ï¼ˆStringï¼‰"></a>rediså‘½ä»¤ä¹‹å­—ç¬¦ä¸²ï¼ˆStringï¼‰</h4></li>
<li><h4 id="rediså‘½ä»¤ä¹‹å“ˆå¸Œï¼ˆHashï¼‰"><a href="#rediså‘½ä»¤ä¹‹å“ˆå¸Œï¼ˆHashï¼‰" class="headerlink" title="rediså‘½ä»¤ä¹‹å“ˆå¸Œï¼ˆHashï¼‰"></a>rediså‘½ä»¤ä¹‹å“ˆå¸Œï¼ˆHashï¼‰</h4></li>
<li><h4 id="rediså‘½ä»¤ä¹‹åˆ—è¡¨ï¼ˆListï¼‰"><a href="#rediså‘½ä»¤ä¹‹åˆ—è¡¨ï¼ˆListï¼‰" class="headerlink" title="rediså‘½ä»¤ä¹‹åˆ—è¡¨ï¼ˆListï¼‰"></a>rediså‘½ä»¤ä¹‹åˆ—è¡¨ï¼ˆListï¼‰</h4></li>
<li><h4 id="rediså‘½ä»¤ä¹‹é›†åˆï¼ˆSetï¼‰"><a href="#rediså‘½ä»¤ä¹‹é›†åˆï¼ˆSetï¼‰" class="headerlink" title="rediså‘½ä»¤ä¹‹é›†åˆï¼ˆSetï¼‰"></a>rediså‘½ä»¤ä¹‹é›†åˆï¼ˆSetï¼‰</h4></li>
<li><h4 id="rediså‘½ä»¤ä¹‹æœ‰åºé›†åˆï¼ˆSorted-Setï¼‰"><a href="#rediså‘½ä»¤ä¹‹æœ‰åºé›†åˆï¼ˆSorted-Setï¼‰" class="headerlink" title="rediså‘½ä»¤ä¹‹æœ‰åºé›†åˆï¼ˆSorted Setï¼‰"></a>rediså‘½ä»¤ä¹‹æœ‰åºé›†åˆï¼ˆSorted Setï¼‰</h4></li>
</ul>
<h3 id="å®‰è£…redis"><a href="#å®‰è£…redis" class="headerlink" title="å®‰è£…redis"></a>å®‰è£…redis</h3><p>redisçš„å®‰è£…æ–¹æ³•æœ‰2ç§ï¼šä¸‹è½½æºç ç¼–è¯‘å®‰è£…å’Œä½¿ç”¨homebrewå®‰è£…ã€‚æœ¬æ–‡é‡‡ç”¨åä¸€ç§æ–¹æ³•ï¼Œå¦‚éœ€ä¸‹è½½æºç ç¼–è¯‘å®‰è£…å‚è€ƒ <a href="https://www.jianshu.com/p/af33284aa57a" target="_blank" rel="noopener">macä¸‹å®‰è£…é…ç½®redis</a>ã€‚é€šè¿‡homebrewå®‰è£…redis:<br> <code>$ brew install redis</code><br> ç»ˆç«¯è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">==&gt; Downloading http://download.redis.io/releases/redis-3.2.3.tar.gz</span><br><span class="line">######################################################################## 100.0%</span><br><span class="line">==&gt; make install PREFIX=/usr/local/Cellar/redis/3.2.3 CC=clang</span><br><span class="line">==&gt; Caveats</span><br><span class="line">To have launchd start redis now and restart at login:</span><br><span class="line">  brew services start redis</span><br><span class="line">Or, if you don&apos;t want/need a background service you can just run:</span><br><span class="line">  redis-server /usr/local/etc/redis.conf</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/redis/3.2.3: 10 files, 1.7M, built in 21 seconds</span><br></pre></td></tr></table></figure>
<p>ä»ä»¥ä¸Šæ—¥å¿—è¾“å‡ºå¯ä»¥çœ‹å‡ºï¼Œå¦‚æœéœ€è¦ç»™redisæœåŠ¡ç«¯æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨å‘½ä»¤åº”è¯¥æ˜¯è¿™æ ·çš„:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ redis-server /usr/local/etc/redis.conf</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>å®‰è£…å®Œæˆåredisé»˜è®¤çš„é…ç½®æ–‡ä»¶redis.confä½äº<br> <code>/usr/local/etc</code><br> åŒæ—¶ï¼Œredis-sentinel.confä¹Ÿåœ¨è¿™é‡Œã€‚</p>
<p>ä½¿ç”¨catå‘½ä»¤æŸ¥çœ‹redis.confï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat /usr/local/etc/redis.conf</span><br></pre></td></tr></table></figure>
<p>ç»ˆç«¯è¾“å‡ºæ–‡ä»¶å†…å®¹ï¼ˆåˆ æ‰äº†å¤§éƒ¨åˆ†æ³¨é‡Šï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">bind 127.0.0.1 ::1</span><br><span class="line">bind 127.0.0.1</span><br><span class="line">port 6379</span><br><span class="line">tcp-backlog 511</span><br><span class="line">timeout 0</span><br><span class="line">tcp-keepalive 300</span><br><span class="line"></span><br><span class="line">################################# GENERAL #####################################</span><br><span class="line"></span><br><span class="line"># By default Redis does not run as a daemon. Use &apos;yes&apos; if you need it.</span><br><span class="line"># Note that Redis will write a pid file in /usr/local/var/run/redis.pid when daemonized.</span><br><span class="line">daemonize no</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">supervised no</span><br><span class="line">pidfile /var/run/redis_6379.pid</span><br><span class="line">loglevel notice</span><br><span class="line">logfile &quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Set the number of databases. The default database is DB 0, you can select</span><br><span class="line"># a different one on a per-connection basis using SELECT &lt;dbid&gt; where</span><br><span class="line"># dbid is a number between 0 and &apos;databases&apos;-1</span><br><span class="line">databases 16</span><br><span class="line"></span><br><span class="line">################################ SNAPSHOTTING  ################################</span><br><span class="line"></span><br><span class="line">save 900 1</span><br><span class="line">save 300 10</span><br><span class="line">save 60 10000</span><br><span class="line">stop-writes-on-bgsave-error yes</span><br><span class="line">rdbcompression yes</span><br><span class="line">rdbchecksum yes</span><br><span class="line">dbfilename dump.rdb</span><br><span class="line"></span><br><span class="line"># The working directory.</span><br><span class="line">dir /usr/local/var/db/redis/</span><br><span class="line"></span><br><span class="line">################################# REPLICATION #################################</span><br><span class="line">slave-serve-stale-data yes</span><br><span class="line">slave-read-only yes</span><br><span class="line">repl-diskless-sync no</span><br><span class="line">repl-diskless-sync-delay 5</span><br><span class="line">repl-disable-tcp-nodelay no</span><br><span class="line">slave-priority 100</span><br><span class="line"></span><br><span class="line">################################## SECURITY ###################################</span><br><span class="line"></span><br><span class="line">################################### LIMITS ####################################</span><br><span class="line"></span><br><span class="line">############################## APPEND ONLY MODE ###############################</span><br><span class="line">appendonly no</span><br><span class="line">appendfilename &quot;appendonly.aof&quot; </span><br><span class="line">appendfsync everysec</span><br><span class="line">no-appendfsync-on-rewrite no</span><br><span class="line">auto-aof-rewrite-percentage 100</span><br><span class="line">auto-aof-rewrite-min-size 64mb</span><br><span class="line">aof-load-truncated yes</span><br><span class="line"></span><br><span class="line">################################ LUA SCRIPTING  ###############################</span><br><span class="line">lua-time-limit 5000</span><br><span class="line"></span><br><span class="line">################################ REDIS CLUSTER  ###############################</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">################################## SLOW LOG ##################################</span><br><span class="line"></span><br><span class="line">slowlog-max-len 128</span><br><span class="line"></span><br><span class="line">################################ LATENCY MONITOR ##############################</span><br><span class="line"></span><br><span class="line">latency-monitor-threshold 0</span><br><span class="line"></span><br><span class="line">############################# EVENT NOTIFICATION ##############################</span><br><span class="line"></span><br><span class="line">notify-keyspace-events &quot;&quot;</span><br><span class="line"></span><br><span class="line">############################### ADVANCED CONFIG ###############################</span><br><span class="line">hash-max-ziplist-entries 512</span><br><span class="line">hash-max-ziplist-value 64</span><br><span class="line">list-max-ziplist-size -2</span><br><span class="line">list-compress-depth 0</span><br><span class="line">set-max-intset-entries 512</span><br><span class="line">zset-max-ziplist-entries 128</span><br><span class="line">zset-max-ziplist-value 64</span><br><span class="line">hll-sparse-max-bytes 3000</span><br><span class="line">activerehashing yes</span><br><span class="line">client-output-buffer-limit normal 0 0 0</span><br><span class="line">client-output-buffer-limit slave 256mb 64mb 60</span><br><span class="line">client-output-buffer-limit pubsub 32mb 8mb 60</span><br><span class="line">hz 10</span><br><span class="line">aof-rewrite-incremental-fsync yes</span><br></pre></td></tr></table></figure>
<p>å®˜ç½‘ä¸Šå¯¹äºå¦‚ä½•é…ç½®redisçš„æè¿°:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Redis is able to start without a configuration file using a built-in default configuration, however this setup is only recommended for testing and development purposes.</span><br><span class="line">The proper way to configure Redis is by providing a Redis configuration file, usually called redis.conf.</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®ä»¥ä¸Šå†…å®¹,å¦‚æœå¯åŠ¨æ—¶ä¸æŒ‡å®šé…ç½®æ–‡ä»¶,redisä¼šä½¿ç”¨ç¨‹åºä¸­å†…ç½®çš„é»˜è®¤é…ç½®.ä½†æ˜¯åªæœ‰åœ¨å¼€å‘å’Œæµ‹è¯•é˜¶æ®µæ‰è€ƒè™‘ä½¿ç”¨å†…ç½®çš„é»˜è®¤é…ç½®ï¼Œæ­£å¼ç¯å¢ƒæœ€å¥½è¿˜æ˜¯æä¾›é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”ä¸€èˆ¬å‘½åä¸ºredis.conf</p>
<h3 id="å¯åŠ¨redis"><a href="#å¯åŠ¨redis" class="headerlink" title="å¯åŠ¨redis"></a>å¯åŠ¨redis</h3><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨redisï¼š<br> <code>$ redis-server /usr/local/etc/redis.conf</code><br> ç»ˆç«¯è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">8568:M 11 Sep 21:37:46.839 * Increased maximum number of open files to 10032 (it was originally set to 256).</span><br><span class="line">                _._                                                  </span><br><span class="line">           _.-``__ &apos;&apos;-._                                             </span><br><span class="line">      _.-``    `.  `_.  &apos;&apos;-._           Redis 3.2.3 (00000000/0) 64 bit</span><br><span class="line">  .-`` .-```.  ```\/    _.,_ &apos;&apos;-._                                   </span><br><span class="line"> (    &apos;      ,       .-`  | `,    )     Running in standalone mode</span><br><span class="line"> |`-._`-...-` __...-.``-._|&apos;` _.-&apos;|     Port: 6379</span><br><span class="line"> |    `-._   `._    /     _.-&apos;    |     PID: 8568</span><br><span class="line">  `-._    `-._  `-./  _.-&apos;    _.-&apos;                                   </span><br><span class="line"> |`-._`-._    `-.__.-&apos;    _.-&apos;_.-&apos;|                                  </span><br><span class="line"> |    `-._`-._        _.-&apos;_.-&apos;    |           http://redis.io        </span><br><span class="line">  `-._    `-._`-.__.-&apos;_.-&apos;    _.-&apos;                                   </span><br><span class="line"> |`-._`-._    `-.__.-&apos;    _.-&apos;_.-&apos;|                                  </span><br><span class="line"> |    `-._`-._        _.-&apos;_.-&apos;    |                                  </span><br><span class="line">  `-._    `-._`-.__.-&apos;_.-&apos;    _.-&apos;                                   </span><br><span class="line">      `-._    `-.__.-&apos;    _.-&apos;                                       </span><br><span class="line">          `-._        _.-&apos;                                           </span><br><span class="line">              `-.__.-&apos;                                               </span><br><span class="line"></span><br><span class="line">8568:M 11 Sep 21:37:46.844 # Server started, Redis version 3.2.3</span><br><span class="line">8568:M 11 Sep 21:37:46.845 * The server is now ready to accept connections on port 6379</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºredisæœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Œå¹¶åœ¨ç›‘å¬6379ç«¯å£çš„ç½‘ç»œè¿æ¥ã€‚<br> æ³¨æ„: ä½¿ç”¨å‘½ä»¤<code>$ redis-server</code>ä¹Ÿå¯ä»¥å¯åŠ¨,æ­¤æ—¶å¹¶ä¸ä¼šåŠ è½½ä»»ä½•é…ç½®æ–‡ä»¶,ä½¿ç”¨çš„æ˜¯ç¨‹åºä¸­å†…ç½®(built-in)çš„é»˜è®¤é…ç½®.</p>
<h3 id="æ£€æµ‹redisæœåŠ¡å™¨æ˜¯å¦å¯åŠ¨"><a href="#æ£€æµ‹redisæœåŠ¡å™¨æ˜¯å¦å¯åŠ¨" class="headerlink" title="æ£€æµ‹redisæœåŠ¡å™¨æ˜¯å¦å¯åŠ¨"></a>æ£€æµ‹redisæœåŠ¡å™¨æ˜¯å¦å¯åŠ¨</h3><p>é‡æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œè¾“å…¥å‘½ä»¤<br> <code>$ redis-cli ping</code><br> è¯¥ç»ˆç«¯è¾“å‡º<br> <code>pong</code><br> è¯´æ˜æœåŠ¡å™¨è¿ä½œæ­£å¸¸ã€‚</p>
<h3 id="å…³é—­redis"><a href="#å…³é—­redis" class="headerlink" title="å…³é—­redis"></a>å…³é—­redis</h3><p>å…³é—­redisæœ‰2ç§æ–¹æ³•ï¼š</p>
<h4 id="æ–¹æ³•1"><a href="#æ–¹æ³•1" class="headerlink" title="æ–¹æ³•1"></a>æ–¹æ³•1</h4><p>åœ¨æ‰§è¡Œå¯åŠ¨å‘½ä»¤çš„ç»ˆç«¯çª—å£ä½¿ç”¨ctrl+c,æ­¤æ—¶ç¬¬ä¸€ä¸ªçª—å£è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">8773:M 11 Sep 21:46:26.581 # User requested shutdown...</span><br><span class="line">8773:M 11 Sep 21:46:26.581 * Saving the final RDB snapshot before exiting.</span><br><span class="line">8773:M 11 Sep 21:46:26.583 * DB saved on disk</span><br><span class="line">8773:M 11 Sep 21:46:26.583 * Removing the pid file.</span><br><span class="line">8773:M 11 Sep 21:46:26.583 # Redis is now ready to exit, bye bye...</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨å¦å¤–ä¸€ä¸ªç»ˆç«¯çª—å£æ‰§è¡Œ<code>$ redis-cli ping</code>,è¾“å‡º<br> <code>Could not connect to Redis at 127.0.0.1:6379: Connection refused</code><br> è¯´æ˜ç¡®å®å·²å…³é—­</p>
<h4 id="æ–¹æ³•2"><a href="#æ–¹æ³•2" class="headerlink" title="æ–¹æ³•2"></a>æ–¹æ³•2</h4><p>åœ¨å¦å¤–ä¸€ä¸ªç»ˆç«¯çª—å£æ‰§è¡Œ<code>$ redis-cli shutdown</code>,æ­¤æ—¶ç¬¬ä¸€ä¸ªçª—å£è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">8773:M 11 Sep 21:46:26.581 # User requested shutdown...</span><br><span class="line">8773:M 11 Sep 21:46:26.581 * Saving the final RDB snapshot before exiting.</span><br><span class="line">8773:M 11 Sep 21:46:26.583 * DB saved on disk</span><br><span class="line">8773:M 11 Sep 21:46:26.583 * Removing the pid file.</span><br><span class="line">8773:M 11 Sep 21:46:26.583 # Redis is now ready to exit, bye bye...</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨å¦å¤–ä¸€ä¸ªç»ˆç«¯çª—å£æ‰§è¡Œ<code>$ redis-cli ping</code>,è¾“å‡º<br> <code>Could not connect to Redis at 127.0.0.1:6379: Connection refused</code><br> è¯´æ˜ç¡®å®å·²å…³é—­</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/02/02/Pythonçš„ä¸€äº›åŸºæœ¬æ“ä½œ/" rel="next" title="Pythonçš„ä¸€äº›åŸºæœ¬æ“ä½œ">
                <i class="fa fa-chevron-left"></i> Pythonçš„ä¸€äº›åŸºæœ¬æ“ä½œ
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/02/02/Pythonç‰ˆæœ¬ç®¡ç†å·¥å…·Pyenv/" rel="prev" title="Pythonç‰ˆæœ¬ç®¡ç†å·¥å…·Pyenv">
                Pythonç‰ˆæœ¬ç®¡ç†å·¥å…·Pyenv <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Seven</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis"><span class="nav-number">1.</span> <span class="nav-text">Redis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Redisçš„ä¼˜åŠ¿"><span class="nav-number">1.0.1.</span> <span class="nav-text">Redisçš„ä¼˜åŠ¿</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redisé…ç½®"><span class="nav-number">1.0.2.</span> <span class="nav-text">Redisé…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redisåå°è¿è¡Œ"><span class="nav-number">1.0.3.</span> <span class="nav-text">Redisåå°è¿è¡Œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis-å­˜å­—ç¬¦ä¸²è¿”å›çš„å´æ˜¯byte"><span class="nav-number">1.0.4.</span> <span class="nav-text">Redis å­˜å­—ç¬¦ä¸²è¿”å›çš„å´æ˜¯byte</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#"><span class="nav-number">1.0.5.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redisæ•°æ®ç±»å‹"><span class="nav-number">1.0.6.</span> <span class="nav-text">Redisæ•°æ®ç±»å‹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#rediså‘½ä»¤ä¹‹å­—ç¬¦ä¸²ï¼ˆStringï¼‰"><span class="nav-number">1.0.6.1.</span> <span class="nav-text">rediså‘½ä»¤ä¹‹å­—ç¬¦ä¸²ï¼ˆStringï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rediså‘½ä»¤ä¹‹å“ˆå¸Œï¼ˆHashï¼‰"><span class="nav-number">1.0.6.2.</span> <span class="nav-text">rediså‘½ä»¤ä¹‹å“ˆå¸Œï¼ˆHashï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rediså‘½ä»¤ä¹‹åˆ—è¡¨ï¼ˆListï¼‰"><span class="nav-number">1.0.6.3.</span> <span class="nav-text">rediså‘½ä»¤ä¹‹åˆ—è¡¨ï¼ˆListï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rediså‘½ä»¤ä¹‹é›†åˆï¼ˆSetï¼‰"><span class="nav-number">1.0.6.4.</span> <span class="nav-text">rediså‘½ä»¤ä¹‹é›†åˆï¼ˆSetï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rediså‘½ä»¤ä¹‹æœ‰åºé›†åˆï¼ˆSorted-Setï¼‰"><span class="nav-number">1.0.6.5.</span> <span class="nav-text">rediså‘½ä»¤ä¹‹æœ‰åºé›†åˆï¼ˆSorted Setï¼‰</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å®‰è£…redis"><span class="nav-number">1.0.7.</span> <span class="nav-text">å®‰è£…redis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é…ç½®æ–‡ä»¶"><span class="nav-number">1.0.8.</span> <span class="nav-text">é…ç½®æ–‡ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¯åŠ¨redis"><span class="nav-number">1.0.9.</span> <span class="nav-text">å¯åŠ¨redis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ£€æµ‹redisæœåŠ¡å™¨æ˜¯å¦å¯åŠ¨"><span class="nav-number">1.0.10.</span> <span class="nav-text">æ£€æµ‹redisæœåŠ¡å™¨æ˜¯å¦å¯åŠ¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å…³é—­redis"><span class="nav-number">1.0.11.</span> <span class="nav-text">å…³é—­redis</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#æ–¹æ³•1"><span class="nav-number">1.0.11.1.</span> <span class="nav-text">æ–¹æ³•1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ–¹æ³•2"><span class="nav-number">1.0.11.2.</span> <span class="nav-text">æ–¹æ³•2</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Seven</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
